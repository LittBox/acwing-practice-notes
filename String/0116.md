# https://www.acwing.com/problem/content/description/5999/ 回文字符串

核心掌握要点:
- 字符串反转
  - 使用库函数
    - `reverse(str.begin(),str.end);`
    - 没有返回值，直接覆盖
    - 头文件 `#include <algorithm>`
  - 自己手动封装
    - ```c++
        void reverse(string &s){
            int n = s.length();
            for(int i = 0; i < n / 2; i++){
                char temp = s[n - 1 - i];
                s[n - 1 - i] = s[i];
                s[i] = temp;
            }
        }
        ```
- 截取字串
  - `#include<string>`
  - `str.substr(pos)`, 从下标为`pos`的位置元素开始，一直截取到字符串str的末尾
  - `str.substr(pos, n)`, 从下标为`pos`的位置元素开始，截取`n`个元素
- 字符串比较
  - `==`符号直接比较
  - `str1.compare(str2)`，逐字符比较 str1 和 str2 对应位置的字符的 ASCII 码值
    - `#include<string>` 
    1. 若某一位置的字符不同：
       *    返回值 < 0：str1 该位置的字符的 ASCII 码 < str2 对应位置的字符（即 str1 字典序更小）；
       *    返回值 > 0：str1 该位置的字符的 ASCII 码 > str2 对应位置的字符（即 str1 字典序更大）；
    2. 若所有对应位置的字符都相同：
       *   再比较长度：返回值 < 0 表示      `str1.length() < str2.length()；`
       *   返回值 > 0 表示 `str1.length() > str2.length()；`
    3. 若字符全相同且长度相等：返回值 = 0（字符串完全相等）。
- 字符串分块讨论思想
  - 本题【核心解题思想总结】：字符串处理的经典思路 → `精准分块讨论 + 分层顺序校验`
  - 题目核心要求: 仅允许在字符串「最开头」追加任意个合法字符l/q/b，不能修改原串任何字符、不能在其他位置追加，最终让整个字符串成为回文 → 能则输出Yes，不能则No。
  - 字符串被严格拆分为 3 个区块：`左纯合法段A + 中间核心段B + 右纯合法段C`
> 合法字符：l、q、b 这 3 个；其余所有字符都是非法字符。

题目代码：

```c++
#include <iostream>
#include <algorithm>
#include <cstring>   //C 风格头文件，继承自 C 语言的<string.h>（C++ 中用<cstring>包装）

using namespace std;

int T;

int main(){
    cin>>T;
    string s;
    for(int i=1;i<=T;i++){

        cin>>s;
        int l,r;  //我们要把ABC这个分界点找到，l为左端点，r为右端点
        for(r=s.size()-1;r>=0&&(s[r]=='l'||s[r]=='q'||s[r]=='b');r--);

        if (r<=0)   cout<<"Yes"<<endl;   //字符串仅有l,q,b字符，Yes

        else{

            for(l=0;l<r&&(s[l]=='l'||s[l]=='q'||s[l]=='b');l++);
            string tmp = s.substr(l,r-l+1);         //把B部分拿出来
            reverse (tmp.begin(),tmp.end());        //通过翻转后是否一样来判断回文
            if (tmp!=s.substr(l,r-l+1))   cout<<"No"<<endl;

            else {
                for(;l>=0&&r<=s.size()&&s[l]==s[r];l--,r++); //看一下A的序列是否和C前缀一样
                if (l==-1)  cout<<"Yes"<<endl;
                else cout<<"No"<<endl;
            }
        }
    }
    return 0;
}

// 作者：coding_chen
// 链接：https://www.acwing.com/solution/content/258861/
// 来源：AcWing
// 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```


